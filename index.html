<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Trivia Game
    </title>
    <!-- <link rel="stylesheet" type="text/css" href="assets/css/reset.css"> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Calligraffitti|Playfair+Display|Sedgwick+Ave+Display|Tangerine" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css"> 
    <!-- jQuery Google CDN -->
  </head>
  <body>
    <!-- this div holds the trivia game title, questions, and game stats -->
    <!-- <div class="container-fluid"> -->
    <div class=" jumbotron">
      <!-- title & start button will be displayed at start of game-->
      <div id="startPage"> 
        <h1 class="gameTitle">Solar Eclipse Trivia!
        </h1>
        <a class="btn btn-primary btn-lg" href="#" role="button">Start
        </a>
      </div>
      <!-- the countdown timer will be displayed above the quiz questions after the button is clicked and will remain at the top until the time is up -->
      <div id="questionPage" > 
        <h2 class="gameTitle">Solar Eclipse Trivia!
          </h1>
        <h3 id="timer">Time Remaining: 30
        </h3>
        <h2 id="question"> 
        </h2>
        <br>
        <ul id="selections">
        </ul>
      </div>
      <!--the user only has a set time to complete the questions. when the timer runs out, the time is up
-->
      <div id="giphyPage"> 
        <h3 id="c-or-i">
        </h3>
        <div id="giphyImage" src="">
        </div>
      </div>     
      <!-- the game stats will be displayed once the timer is up -->
      <div id="resultsPage"> 
        <h2 class="gameTitle">Solar Eclipse Trivia!
        </h2>
        <h3 id="correct">Correct: 0
        </h3>
        <h3 id="incorrect">Incorrect: 0
        </h3>
        <h3 id="unanswered">Unanswered: 0
        </h3>
      </div>
    </div>
    <script type="text/javascript">
      /*---when the page loads...---*/
$(document).ready(function() {

   /*----------global variables---------*/
    var correct = 0;
    var incorrect = 0;
    var unanswered = 0;
    var i = 0;
    var timeRemaining = 30;
    var timerId;
    var giphy = ["assets/images/TNY-Livestream-Gif.gif", "assets/images/anigif_enhanced-5260-1406732708-8.gif",  "assets/images/vF7MiG.gif"];
    var j = 0;

    /*-----------------------these questions will be dyanimcally displayed one at a time----------------------------------------*/
    var allQuestions = [{
            q: "What year was the last solar eclipse?",
            a: ["1978", "1979", "1980", "1981"],
            correct: 1
        }, {
            q: "Which lunar phase does a solar eclipse happen in?",
            a: ["Full Moon", "Half Moon", "New Moon", "Crescent Moon"],
            correct: 2
        }, {
            q: "Which U.S. state was the first to experience the Solar Eclipse Totality?",
            a: ["Oregon", "California", "Montana", "South Carolina"],
            correct: 0
        }, {
            q: "The center line of totatlity passes through how many states?",
            a: ["5", "1", "20", "10"],
            correct: 3
        }, {
            q: "A solar eclipse is the lineup of the following celestial objects?",
            a: ["Sun Moon Earth", "Sun Earth Venus", "Earth Moon Stars", "Wind Earth Fire"],
            correct: 0
        }, {
            q: "The solar eclipse totality last almost..",
            a: ["60 minutes", "30 minutes", "3 minutes", "24 hours"],
            correct: 2
        },
        {
            q:"What year was the last total solar eclipse seen exclusively over the continental United States?",
            a:["1980","1930", "1880", "1830"],
            correct:2
        },
        {
            q:"Totality is the only time when one can see the corona, which is the Sun's what?",
            a:["photospere","atmosphere", "sunspots", "core"],
            correct:1
        },
    ];

    /*------when the page first loads------*/
    $("#questionPage").hide();
    $("#resultsPage").hide();


    /*----when the start button is clicked--------*/
    $('.btn').on("click", function() {
        $("#startPage").hide();
        $("#questionPage").show();
        run();
    });

    /*---this starts the timer, displays the questions with answers, and checks the value of the user answers-----*/
    function run() {
            clearInterval(timerId);
            timerId = setInterval(decrement, 1000);
            // timeRemaining = 30;
            var correctAnswer = allQuestions[i].a[allQuestions[i].correct];
            var html = "";
            html += allQuestions[i].q + "<br><br>";

            $.each(allQuestions[i].a, function(index, value) {
                if (value === correctAnswer) {
                    html += '<button class="correct" type="button">' + value + '</button>';
                    $("#correct").html("<h3>" + "Correct: " + correct + "</h3>");

                } else {
                    html += '<button class="incorrect" type="button">' + value + '</button>';
                    $("#incorrect").html("<h3>" + "Incorrect: " + incorrect + "</h3>");
                }
            });
            html += '<br>';
            $('#question').html(html);
            i++;
        }

    /*--------------this has the timer count down and says what to do if the user doesn't answer before 
    the timer runs out--------------------------------------*/
    function decrement() {

        timeRemaining--;
        $("#timer").html("<h3>" + "Time Remaining: " + timeRemaining + "</h3>");

        if (timeRemaining === 0) {
            $("#questionPage").hide();
            $("#giphyPage").show();
            $('#c-or-i').html("Times Up!");
            $('#giphyImage').html("<img src=" + giphy[0] + " width='350px'/>");
            clearInterval(timerId);
            setTimeout(nextQuestion, 1000 * 5);
            timeRemaining = 30;
            unanswered++;
            $("#unanswered").html("<h3>" + "Unanswered: " + unanswered + "</h3>");
        }
    }

    /*-----this onclick event detects the correct user answer----*/
    $("html").on("click", ".correct", function() {
        
        correct++;
        clearInterval(timerId);
        $('#questionPage').hide();
        $("#giphyPage").show();
        $('#c-or-i').html("Yup, that's correct!");
        $('#giphyImage').html("<img src=" + giphy[2] + " width='350px'/>");
        setTimeout(nextQuestion, 1000 * 5);
        timeRemaining = 30;
    });

    /*-----this onclick event detects the incorrect user answer----*/
    $("html").on("click", ".incorrect", function() {
        
        incorrect++;
        clearInterval(timerId);
        $('#questionPage').hide();
        $("#giphyPage").show();
        $('#c-or-i').html("Nope, that's incorrect!");
        $('#giphyImage').html("<img src=" + giphy[1] + " width='350px'/>");
        setTimeout(nextQuestion, 1000 * 5);
        timeRemaining = 30;
    });

    /*------this displays the next question to the user------*/
    function nextQuestion() {
        
        $('#startPage').hide();
        $("#resultsPage").hide();
        $("#giphyPage").hide();
        $('#questionPage').show();
        clearInterval(timerId);
        run();
        if (allQuestions[i] === null) {
            stop();

        }
    }

   /*---------this stops the timer and displays the results----*/
    function stop() {
        
        clearInterval(timerId);
        displayResults();
    }

  /*-------------displaying the results to the screen---------*/
    function displayResults() {
            
        $("#resultsPage").show();
        $('#questionPage').hide();
        setTimeout(reset, 1000 * 10);
        }

    /*-----------this function resets the trivia game----------*/
    function reset() {
        
        $('#startPage').show();
        $("#resultsPage").hide();
        $("#questionPage").hide();
        clearInterval(timerId);
        timeRemaining = 30;
        timerId;
        correct = 0;
        incorrect = 0;
        unanswered = 0;
    }

});
    </script>
    <!--   </div> -->
    <!-- Bootstrap JS MaxCDN -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous">
    </script>
    <script src="assets/js/app.js">
    </script> 
  </body>
</html>